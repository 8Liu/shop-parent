<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.liudehuang.dao.RpMessageDao">
	<resultMap id="rpMessageMap" type="com.liudehuang.entity.RpMessage">
		<result property="messageId" column="message_id"/>
		<result property="messageBody" column="message_body"/>
		<result property="messageDataType" column="message_data_type"/>
		<result property="messageSendTimes" column="message_send_times"/>
		<result property="consumerQueue" column="consumer_queue"/>
		<result property="areadlyDead" column="areadly_dead"/>
		<result property="status" column="status"/>
		<result property="remark" column="remark"/>
		<result property="orderId" column="order_id"/>
		<result property="creater" column="creater"/>
		<result property="editor" column="editor"/>
		<result property="version" column="version"/>
		<result property="createTime" column="create_time"/>
		<result property="editTime" column="edit_time"/>
		<result property="field1" column="field1"/>
		<result property="field2" column="field2"/>
		<result property="id" column="id"/>
	</resultMap>

	<sql id="table_name">
		rp_transaction_message
	</sql>

	<sql id="Base_Column_List">
		id, version, create_time, editor, creater, edit_time, status,remark,
		message_id,message_body,message_data_type,consumer_queue,message_send_times,areadly_dead,
		order_id,field1,field2

	</sql>

	<insert id="saveMessage" parameterType="com.liudehuang.entity.RpMessage">
		insert into <include refid="table_name"/>(
			version,
			editor,
			creater,
			message_id,
			message_body,
			message_data_type,
			consumer_queue,
			message_send_times,
			areadly_dead,
			status,
			remark,
			order_id,
			field1,
			field2
		)values (
			0,
			#{editor},
			#{creater},
			#{messageId},
			#{messageBody},
			#{messageDataType},
			#{consumerQueue},
			#{messageSendTimes},
			#{areadlyDead},
			#{status},
			#{remark},
			#{orderId},
			#{field1},
			#{field2}
		)
	</insert>

	<update id="updateMessageByMessageId" parameterType="com.liudehuang.entity.RpMessage">
		update <include refid="table_name"/>
		set
			version = #{version}+1,
			editor = #{editor},
			creater = #{creater},
			message_id = #{messageId},
			message_body = #{messageBody},
			message_data_type = #{messageDataType},
			consumer_queue = #{consumerQueue},
			message_send_times = #{messageSendTimes},
			areadly_dead = #{areadlyDead},
			status = #{status},
			remark = #{remark},
			order_id = #{orderId},
			field1 = #{field1},
			field2 = #{field2}
		where message_id = #{messageId}
	</update>

	<select id="getMessageByMessageId" parameterType="string" resultMap="rpMessageMap">
		select
		<include refid="Base_Column_List" />
		from
		<include refid="table_name" />
		where message_id = #{messageId}
	</select>

	<delete id="deleteMessageByMessageId" parameterType="string">
		delete from <include refid="table_name"/>
		where message_id = #{messageId}
	</delete>
</mapper>